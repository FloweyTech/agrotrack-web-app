<div class="report-list-container">

  <div class="header-section">
    <h2>{{ 'report.title' | translate }}</h2>

    <div class="header-actions">
      <a mat-raised-button class="create-button" routerLink="create">
        <mat-icon>add</mat-icon>
        {{ 'report.create.title' | translate }}
      </a>

      <button mat-raised-button class="refresh-button" (click)="reload()">
        <mat-icon>refresh</mat-icon>
        {{ 'report.refresh' | translate }}
      </button>
    </div>
  </div> <div class="filters">
  <label for="orgFilter">{{ 'report.filterBy' | translate }}</label>
  <div class="custom-select-wrapper">
    <select id="orgFilter" (change)="filterByOrganization($event)">
      <option value="">{{ 'report.allOrganizations' | translate }}</option>
      <option *ngFor="let orgId of organizations" [value]="orgId">
        {{ 'Organization ' + orgId }}
      </option>
    </select>
    <mat-icon>expand_more</mat-icon>
  </div>
</div>

  <div class="table-container mat-elevation-z4">
    <div *ngIf="store.loading()" class="loading-shade">
      <p>{{ 'report.loading' | translate }}</p>
    </div>

    <table mat-table [dataSource]="filteredReports">
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>{{ 'report.columns.id' | translate }}</th>
        <td mat-cell *matCellDef="let r" class="id-cell">#{{ r.id }}</td>
      </ng-container>

      <ng-container matColumnDef="organizationId">
        <th mat-header-cell *matHeaderCellDef>{{ 'report.columns.organization' | translate }}</th>
        <td mat-cell *matCellDef="let r">{{ r.organizationId }}</td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>{{ 'report.columns.type' | translate }}</th>
        <td mat-cell *matCellDef="let r">
          <span class="type-badge">{{ ('report.types.' + r.type) | translate }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>{{ 'report.columns.status' | translate }}</th>
        <td mat-cell *matCellDef="let r">
          <span class="status-indicator" [class]="'status-' + r.status.toLowerCase()">
            {{ ('report.statuses.' + r.status) | translate }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="period">
        <th mat-header-cell *matHeaderCellDef>{{ 'report.columns.period' | translate }}</th>
        <td mat-cell *matCellDef="let r" class="period-cell">
          <mat-icon class="small-icon">date_range</mat-icon>
          {{ r.periodStart | date: 'dd/MM/yyyy' }} - {{ r.periodEnd | date: 'dd/MM/yyyy' }}
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>{{ 'report.columns.actions' | translate }}</th>
        <td mat-cell *matCellDef="let r">
          <a mat-stroked-button color="primary" [routerLink]="[r.id]" class="view-btn">
            <mat-icon>visibility</mat-icon>
            {{ 'report.actions.viewDetail' | translate }}
          </a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" class="data-row"></tr>
    </table>

    <div *ngIf="filteredReports.length === 0 && !store.loading()" class="no-data">
      <p>No reports found.</p>
    </div>
  </div>
</div>
