<div class="organization-list">

  <div class="list-header">
    <h1>{{ 'organization.title' | translate }}</h1>
  </div>

  <div class="create-section">
    <button mat-raised-button color="primary" (click)="navigateToNew()" class="create-button">
      {{ 'organization.create' | translate }} +
    </button>
  </div>

  @if (store.organizations().length === 0) {
    <div class="no-organizations">
      <mat-icon class="no-org-icon">group_off</mat-icon>
      <p>{{ 'organization.no-organizations' | translate }}</p>
    </div>
  }


  @if (store.organizations().length > 0) {
    <div class="organization-grid">
      @for (org of store.organizations(); track org.id) {
        <mat-card class="organization-card">
          <mat-card-header>
            <mat-icon mat-card-avatar>domain</mat-icon>
            <mat-card-title>{{ org.name }}</mat-card-title>
            <mat-card-subtitle>
              {{ 'organization.plan-label' | translate }}:
              {{ org.subscription.plan }}
            </mat-card-subtitle>
          </mat-card-header>

          <mat-card-content>
            <p>
              <strong>{{ 'organization.members' | translate }}:</strong>
              {{ org.members.length }}
            </p>
            <p>
              <strong>{{ 'organization.status' | translate }}:</strong>
              {{ org.status | titlecase }}
            </p>
            <p>
              <strong>{{ 'organization.subscription-end' | translate }}:</strong>
              {{ org.subscription.endDate | date:'mediumDate' }}
            </p>
          </mat-card-content>

          <mat-card-actions>
            <button mat-stroked-button color="primary" (click)="navigateToOrganization(org.id)">
              {{ 'organization.enter' | translate }}
            </button>
            <button mat-stroked-button color="warn" (click)="deleteOrganization(org.id)">
              {{ 'organization.delete' | translate }}
            </button>
            <button mat-icon-button color="primary" (click)="editOrganization(org.id)" matTooltip="{{ 'organization.edit' | translate }}">
              <mat-icon>edit</mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
      }
    </div>
  }
</div>
